import{s as w}from"../../../assets/index-chunk.js";import{n as h}from"../../../assets/index-chunk2.js";var y=Object.defineProperty,b=Object.getOwnPropertyDescriptor,m=(u,t,s,o)=>{for(var n=o>1?void 0:o?b(t,s):t,i=u.length-1,r;i>=0;i--)(r=u[i])&&(n=(o?r(t,s,n):r(n))||n);return o&&n&&y(t,s,n),n};class d extends w{constructor(){super(...arguments),this.label="",this.open=!1,this._setListeners=!1,this._firstListElement=null}handleItemSlotChange(t){var n;const o=t.target.assignedElements();this._firstListElement=o[0];for(let[i,r]of o.entries()){const l=r.tagName.toLowerCase();if(l==="nsc-menu-item"){r.setAttribute("role","listitem");let e=(n=r.shadowRoot)==null?void 0:n.querySelector("a");e==null||e.setAttribute("role","menuitem"),i===0?e==null||e.setAttribute("tabindex","0"):e==null||e.setAttribute("tabindex","-1")}this._setListeners||(l==="nsc-menu-item"||l==="nsc-submenu")&&r.addEventListener("keydown",e=>{var a,c,f,p;this._setListeners=!0,e.key==="ArrowLeft"?(this.open=!1,(c=(a=this.shadowRoot)==null?void 0:a.querySelector("a"))==null||c.focus(),e.preventDefault(),e.stopPropagation()):e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.handleArrowDown(e)):e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.handleArrowUp(e)):e.key==="Escape"&&(this.open=!1,e.preventDefault(),e.stopPropagation(),(p=(f=this.shadowRoot)==null?void 0:f.querySelector("a"))==null||p.focus())})}}handleSubmenuItemClicked(){this.open=!this.open}handleAnchorKeydown(t){switch(t.key){case"ArrowRight":this.open=!0,this.focusFirstSubmenuItem(),t.preventDefault();break;case"Enter":case" ":this.open=!this.open,this.focusFirstSubmenuItem(),t.preventDefault();break}}focusFirstSubmenuItem(){setTimeout(()=>{var t,s,o;(o=(s=(t=this._firstListElement)==null?void 0:t.shadowRoot)==null?void 0:s.querySelector("a"))==null||o.focus()},0)}handleArrowDown(t){var r,l,e,a;t.preventDefault();const s=this.querySelectorAll(":scope > nsc-menu-item, :scope > nsc-submenu"),o=this.querySelector(":focus");let n=Array.from(s).indexOf(o);n===-1&&((l=(r=s[0].shadowRoot)==null?void 0:r.querySelector("a"))==null||l.focus());let i=n+1;i>s.length-1&&(i=0),(a=(e=s[i].shadowRoot)==null?void 0:e.querySelector("a"))==null||a.focus()}handleArrowUp(t){var r,l;t.preventDefault();const s=this.querySelectorAll(":scope > nsc-menu-item, :scope > nsc-submenu"),o=this.querySelector(":focus");let i=Array.from(s).indexOf(o)-1;i<0&&(i=s.length-1),(l=(r=s[i].shadowRoot)==null?void 0:r.querySelector("a"))==null||l.focus()}}m([h({type:String})],d.prototype,"label",2);m([h({type:Boolean})],d.prototype,"open",2);export{d as N};
